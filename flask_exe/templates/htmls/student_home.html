{% extends "layout.html" %}

{% block contents %}
<article>
    <div class="student-header">
        <span class="user-badge">ğŸ‘¤ {{ session.get('username') }}</span>
        <h1>ğŸ““ å­¦ç¿’æ—¥èªŒ</h1>
        <p>æ¯æ—¥ã®å­¦ç¿’ã‚’è¨˜éŒ²ã—ã¦ã€è‡ªåˆ†ã®æˆé•·ã‚’è¦‹å®ˆã‚ã†ã€‚</p>
    </div>

    <section>
        <h2>âœï¸ æ–°ã—ã„æ—¥èªŒã‚’ä½œæˆ</h2>
        
        <div class="journal-form">
            <form method="POST" action="/submit_report">
                <fieldset>
                    <legend>æ—¥èªŒæƒ…å ±ã‚’å…¥åŠ›</legend>
                    
                    <div>
                        <label for="date">ğŸ“… æ—¥ä»˜ï¼š</label>
                        <input type="date" id="date" name="date" required>
                    </div>

                    <div>
                        <label for="title">ğŸ“Œ ã‚¿ã‚¤ãƒˆãƒ«ï¼š</label>
                        <input type="text" id="title" name="title" placeholder="ä¾‹ï¼šä»Šæ—¥ã®å­¦ç¿’å†…å®¹" required>
                    </div>

                    <div>
                        <label for="content">ğŸ“ å†…å®¹ï¼š</label>
                        <textarea id="content" name="content" placeholder="ä»Šæ—¥ã®å­¦ç¿’ã‚„æ„Ÿæƒ³ã‚’æ›¸ã„ã¦ãã ã•ã„...&#10;ä¾‹ï¼š&#10;ãƒ»ä»Šæ—¥å­¦ã‚“ã ã“ã¨&#10;ãƒ»é›£ã—ã‹ã£ãŸã“ã¨&#10;ãƒ»æ˜æ—¥ã®ç›®æ¨™" required></textarea>
                    </div>

                    <button type="submit">ğŸ’¾ æ—¥èªŒã‚’ä¿å­˜</button>
                </fieldset>
            </form>
        </div>
    </section>

    <section>
        <h2>ğŸ“š ã‚ãªãŸã®æ—¥èªŒä¸€è¦§</h2>
        
        {% if reports %}
        <table class="reports-table">
            <thead>
                <tr>
                    <th>ğŸ“… æ—¥ä»˜</th>
                    <th>ğŸ“Œ ã‚¿ã‚¤ãƒˆãƒ«</th>
                    <th>ğŸ“ å†…å®¹</th>
                    <th>ğŸ’¬ å…ˆç”Ÿã®ã‚³ãƒ¡ãƒ³ãƒˆ</th>
                </tr>
            </thead>
            <tbody>
                {% for report in reports %}
                <tr>
                    <td>{{ report.date }}</td>
                    <td>{{ report.title }}</td>
                    <td>{{ report.content }}</td>
                    <td>
                        {% if report.comment %}
                            <div class="teacher-comment">
                                {{ report.comment }}
                                {% if report.comment_teacher %}
                                <div class="comment-author">
                                    â€” {{ report.comment_teacher }}å…ˆç”Ÿ
                                </div>
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="no-comment">ã‚³ãƒ¡ãƒ³ãƒˆã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</div>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="empty-state">
            <p>ã¾ã æ—¥èªŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p>ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æœ€åˆã®æ—¥èªŒã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
        </div>
        {% endif %}
    </section>
</article>
{% endblock %}
